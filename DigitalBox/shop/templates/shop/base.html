{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Laptops and Computers</title>
    <link rel="stylesheet" href="{% static 'shop/styles.css' %}">
</head>
<body>


<!-- =========================
    üîù –•–ï–î–ï–† / –®–ê–ü–ö–ê –°–ê–ô–¢–ê
========================== -->
<header class="header">
    <div class="left-group">
        <!-- ‚ò∞ –ö–Ω–æ–ø–∫–∞ –ú–µ–Ω—é -->
        <button id="menu-toggle"
                class="menu-toggle"
                aria-controls="menu"
                aria-expanded="false">
            ‚ò∞
        </button>

        <!-- üìÇ –ö–Ω–æ–ø–∫–∞ –ö–∞—Ç–∞–ª–æ–≥–∞ -->
        <button id="catalog-toggle"
                class="product-catalog"
                aria-controls="catalog"
                aria-expanded="false">
            –ö–∞—Ç–∞–ª–æ–≥
        </button>

    </div>

    <div class="right-group">
        <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É -->
        <button class="product-catalog" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É" onclick="window.location.href='{% url 'cart:detail' %}'">
            üõí
        </button>

        <!-- üîó –õ–æ–≥–æ—Ç–∏–ø-—Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–ª–∞–≤–Ω—É—é -->
        <a href="{% url 'shop:home' %}" class="site-title">DigitalBox</a>
    </div>
</header>

<!-- =========================
    üìÇ –ö–ê–¢–ê–õ–û–ì –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–≤—ã–ø–∞–¥–∞—é—â–∏–π)
========================= -->
<nav id="catalog" class="catalog-list hidden" aria-label="–ö–∞—Ç–∞–ª–æ–≥">
    <h2>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
    <ul>
        {% for category in categories %}
            <li><a href="{% url 'shop:products_by_category' slug=category.slug %}">
                {{ category.name }}
            </a></li>
        {% endfor %}
    </ul>
</nav>

<!-- =========================
    üß≠ –ú–ï–ù–Æ (–≤—ã–ø–∞–¥–∞—é—â–µ–µ)
========================= -->
<nav id="menu" class="menu-list hidden" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
    <h2>–ù–∞–≤–∏–≥–∞—Ü–∏—è</h2>
    <ul>
        <li>
            <a href="{% url 'cart:detail' %}" >
                üõí –ö–æ—Ä–∑–∏–Ω–∞
            </a>
        </li>
        <li> –¥—Ä—É–≥–∏–µ –ø—É–Ω–∫—Ç—ã </li>
    </ul>
</nav>

<!-- =========================
    üìÑ –ö–û–ù–¢–ï–ù–¢ –°–¢–†–ê–ù–ò–¶–´
========================= -->
<main>
    {% block content %}
    <!-- —Å—é–¥–∞ –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª—è—Ç—å—Å—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ—á–µ—Ä–Ω–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ -->
    {% endblock %}
</main>


<!-- =========================
    ‚öôÔ∏è –°–ö–†–ò–ü–¢–´ JS
========================= -->
<script>
    /* –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ —Å–∫—Ä—ã—Ç–∏–µ/—Ä–∞—Å–∫—Ä—ã—Ç–∏–µ –±–ª–æ–∫–æ–≤ */
    function toggle(id, btn) {
        const block = document.getElementById(id);
        const opened = !block.classList.toggle('hidden');
        if (btn) btn.setAttribute('aria-expanded', opened);
    }

    document.addEventListener('DOMContentLoaded', () => {
        const menuToggle = document.getElementById('menu-toggle');
        const catalogToggle = document.getElementById('catalog-toggle');
        const menu = document.getElementById('menu');
        const catalog = document.getElementById('catalog');

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é
        menuToggle.addEventListener('click', e => {
            e.stopPropagation();
            toggle('menu', e.currentTarget);
        });

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞
        catalogToggle.addEventListener('click', e => {
            e.stopPropagation();
            toggle('catalog', e.currentTarget);
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ
        document.addEventListener('click', (event) => {
            if (!menu.contains(event.target) && !menuToggle.contains(event.target)) {
                if (!menu.classList.contains('hidden')) {
                    menu.classList.add('hidden');
                    menuToggle.setAttribute('aria-expanded', 'false');
                }
            }
            if (!catalog.contains(event.target) && !catalogToggle.contains(event.target)) {
                if (!catalog.classList.contains('hidden')) {
                    catalog.classList.add('hidden');
                    catalogToggle.setAttribute('aria-expanded', 'false');
                }
            }
        });
    });
</script>

</body>
</html>